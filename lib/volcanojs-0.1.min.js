/*
* VolcanoJS
* Visit http://volcanojs.com/ for documentation, updates and examples.
*
* Copyright (c) 2012 gstech.co.kr, inc.
* 
* Distributed under the terms of the MIT license.
* http://www.opensource.org/licenses/mit-license.html
*
* This notice shall be included in all copies or substantial portions of the Software.
*/
(function(f){var b=f.volcano,a;a=typeof exports!=="undefined"?exports:f.volcano={};var c=f._;!c&&typeof require!=="undefined"&&(c=require("underscore"),require("backbone"));if(typeof Backbone!=="undefined"&&Backbone)c.extend(a,Backbone),a.BackboneVersion=a.VERSION;else throw Error("volcanojs needs backbonejs library. \n you must include backbonejs before volcanojs");a.VERSION="0.1";a.OS=a.noConflict=function(){f.volcano=b;return this};var i=function(){this.initialize()};i.extend=f.volcano.Model.extend;
i._isInit=false;i._isSupported=false;i._browserPrefix="webkit";i._transformProperty="webkitTransform";i.prototype.initialize=function(){if(!i._isInit){var c=document.createElement("div"),a=["","webkit","Moz","O","ms"],b=a.length,h;i._isInit=true;for(h=0;h<b;h++)if(a[h]+"Perspective"in c.style)return i._transformProperty=a[h]+"Transform",i._isSupported=true,i._browserPrefix=a[h],true}};f.volcano.Core=i})(window);(function(f){var b=function(){this.initialize()},a=volcano.Model.prototype,c=volcano.Collection.prototype,i=volcano.View.prototype,g=volcano.Router.prototype,d=f.volcano.Events;a.addEventListener=a.on;a.removeEventListener=a.off;a.dispatchEvent=a.trigger;c.addEventListener=c.on;c.removeEventListener=c.off;c.dispatchEvent=c.trigger;i.addEventListener=i.on;i.removeEventListener=i.off;i.dispatchEvent=i.trigger;g.addEventListener=g.on;g.removeEventListener=g.off;g.dispatchEvent=g.trigger;a=b.prototype=
new volcano.Core;a.Core_initialize=a.initialize;a.initialize=function(){this.Core_initialize()};a.addEventListener=a.on=a.bind=d.on;a.removeEventListener=a.off=a.unbind=d.off;a.dispatchEvent=a.trigger=d.trigger;f.volcano.EventDispatcher=b})(window);(function(f){var b=function(c){this.initialize(c)};b._eventSplitter=/\s+/;b.randomColorMode=false;var a=b.prototype=new volcano.Core;a._domElement=null;a._elementsContent=null;a.eventCallback=null;a.parent=null;a._alpha=1;a._string=[];a._positions=[];a.isAutoUpdate=true;a._ox=0;a._oy=0;a._oz=0;a.Core_initialize=a.initialize;a.initialize=function(c){var a;this._domElement={};this.Core_initialize();a=function(c,a,i){var g=document.createElement("div");g.style.width=c+"px";g.style.height=a+"px";g.style.margin=
"0px";g.style.padding="0px";if(i!=void 0)g.style.backgroundColor=i;if(b.randomColorMode)g.style.backgroundColor=volcano.ColorUtil.getRandomColor();g.style.position="absolute";return g};if(arguments.length===0||_.isUndefined(c))c=a(this._width,this._height);else if(typeof c==="string"){var g=c,c=a(this._width,this._height);switch(g[0]){case ".":c.className=g.substr(1);break;case "#":c.id=g.substr(1);break;default:c.id=g}}else if(c.val&&c.attr){if(c.length>1)throw Error("You are using multi selected jQuery/Zepto Object \n You MUST select only one DOM Object \n If you want to use multi selected jQuery/Zepto Object, you should use alternative class that is VobjectArray");
c=c.get(0)}else c.style.position=c.style.position=="static"?"relative":"absolute";c.style[volcano.Core._browserPrefix+"TransformStyle"]="preserve-3d";c.style[volcano.Core._transformProperty]="translateZ(0px)";this._string=["translate3d(",0,"px,",0,"px,",0,"px) ","rotateX(",0,"deg) ","rotateY(",0,"deg) ","rotateZ(",0,"deg) ","scale3d(",1,", ",1,", ",1,") "];this._positions=[1,3,5,8,11,14,17,19,21];this._oz=this._oy=this._ox=0;this._domElement=c;this._domElement.volcanoObj=this};a.addEventListener=
function(c,a){var g,d,e,h,j,f,k,l,n;if(!c&&!a)return this;c=c.split(b._eventSplitter);g=this._callbacks||(this._callbacks={});for(f=function(c){if(c){if(!k||l!=c.target)k=l=c.target;if(!k.volcanoObj){k=k.parentNode;f.call(this,c);return}c.volcanoCurrentTarget=this.volcanoObj;c.volcanoTarget=k.volcanoObj;c.domCurrentTarget=c.currentTarget;c.domTarget=c.target;_.extend(n={},c);n.currentTarget=c.volcanoCurrentTarget;n.target=c.volcanoTarget;n.constructor=c.constructor}a(n)};d=c.shift();)e=(j=g[d])?j.tail:
{},e.next=h={},e.callback=f,g[d]={tail:h,next:j?j.next:e},this._domElement.addEventListener(d,f);return this};a.removeEventListener=function(c,a){var g,d,e,h,j;if(d=this._callbacks){if(!c&&!a)return this;for(c=c.split(b._eventSplitter);g=c.shift();)if(e=d[g],delete d[g],e&&a)for(h=e.tail;(e=e.next)!==h;)j=e.callback,this._domElement.removeEventListener(g,j);return this}};a.dispatchEvent=function(c,a){var g,d;if(_.isString(c))for(c=c.split(b._eventSplitter);g=c.shift();)a?a=true:a=false,d=document.createEvent("CustomEvent"),
d.initCustomEvent(g,a,false,{}),this._domElement.dispatchEvent(d);else _.isObject(c)&&this._domElement.dispatchEvent(c);return this};a._width=0;a.width=function(c){return arguments.length?(this._width=c,this._domElement.style.width=c+"px",this):this._width};a._height=0;a.height=function(c){return arguments.length?(this._height=c,this._domElement.style.height=c+"px",this):this._height};a._percentWidth=0;a.percentWidth=function(c){return arguments.length?(this._percentWidth=c,this._domElement.style.width=
c+"%",this):this._percentWidth};a._percentHeight=0;a.percentHeight=function(c){return arguments.length?(this._percentHeight=c,this._domElement.style.height=c+"%",this):this._percentHeight};a.x=function(c){return arguments.length?(this._string[this._positions[0]]=c-this._ox,this.isAutoUpdate&&this.updateTransform(),this):this._string[this._positions[0]]+this._ox};a.y=function(c){return arguments.length?(this._string[this._positions[1]]=c-this._oy,this.isAutoUpdate&&this.updateTransform(),this):this._string[this._positions[1]]+
this._oy};a._pz=0;a.z=function(c){return arguments.length?(this._string[this._positions[2]]=c-this._oz,this.isAutoUpdate&&this.updateTransform(),this):this._string[this._positions[2]]+this._oz};a.position=function(c,a,b){this._string[this._positions[0]]=c-this._ox;this._string[this._positions[1]]=a-this._oy;arguments.length>=3&&(this._string[this._positions[2]]=b-this._oz);this.isAutoUpdate&&this.updateTransform();return this};a.move=function(c,a,b){this._string[this._positions[0]]+=c;this._string[this._positions[1]]+=
a;arguments.length>=3&&(this._string[this._positions[2]]+=b);this.isAutoUpdate&&this.updateTransform();return this};a.rotationX=function(c){return arguments.length?(this._string[this._positions[3]]=c,this.isAutoUpdate&&this.updateTransform(),this):this._string[this._positions[3]]};a.rotationY=function(c){return arguments.length?(this._string[this._positions[4]]=c,this.isAutoUpdate&&this.updateTransform(),this):this._string[this._positions[4]]};a.rotationZ=function(c){return arguments.length?(this._string[this._positions[5]]=
c,this.isAutoUpdate&&this.updateTransform(),this):this._string[this._positions[5]]};a.rotation=function(c,a,b){this._string[this._positions[3]]=c;this._string[this._positions[4]]=a;this._string[this._positions[5]]=b;this.isAutoUpdate&&this.updateTransform();return this};a.scaleX=function(c){return arguments.length?(this._string[this._positions[6]]=c,this.isAutoUpdate&&this.updateTransform(),this):this._string[this._positions[6]]};a.scaleY=function(c){return arguments.length?(this._string[this._positions[7]]=
c,this.isAutoUpdate&&this.updateTransform(),this):this._string[this._positions[7]]};a.scaleZ=function(c){return arguments.length?(this._string[this._positions[8]]=c,this.isAutoUpdate&&this.updateTransform(),this):this._string[this._positions[8]]};a.scale=function(c,a,b){switch(arguments.length){case 0:return this.isAutoUpdate&&this.updateTransform(),this._string[this._positions[6]];case 1:this._string[this._positions[6]]=c;this._string[this._positions[7]]=c;this._string[this._positions[8]]=c;this.isAutoUpdate&&
this.updateTransform();break;case 2:this._string[this._positions[6]]=c;this._string[this._positions[7]]=a;this.isAutoUpdate&&this.updateTransform();break;case 3:this._string[this._positions[6]]=c,this._string[this._positions[7]]=a,this._string[this._positions[8]]=b,this.isAutoUpdate&&this.updateTransform()}return this};a.origin=function(c,a,b){if(typeof c==="string"){var d=f.getComputedStyle(this,null);console.log(d);console.log("w:"+d.getPropertyValue("width")+" || h: "+d.height)}else arguments.length<
3&&(b=0),this._string[this._positions[0]]+=this._ox-c,this._string[this._positions[1]]+=this._oy-a,this._string[this._positions[2]]+=this._oz-b,this._ox=c,this._oy=a,this._oz=b,this.isAutoUpdate&&this.updateTransform();return this};a.transformOrigin=function(c,a){return arguments.length?(this._domElement.style[volcano.Core._browserPrefix+"TransformOrigin"]=(Number(c)?c+"px":c)+" "+(Number(a)?a+"px":a),this.isAutoUpdate&&this.updateTransform(),this):this._domElement.style[volcano.Core._browserPrefix+
"TransformOrigin"]};a.transformString=function(c){for(var c=c.toLowerCase().split(" "),a=c.length,b=0,d=[],e=[0,0,0,0,0,0,0,0,0],h=0;b<a;b++)switch(c[b]){case "p":case "position":case "translate":h=d.push("translate3d(",this._string[this._positions[0]],"px,",this._string[this._positions[1]],"px,",this._string[this._positions[2]],"px) ");e[0]=h-6;e[1]=h-4;e[2]=h-2;break;case "rx":case "rotatex":case "rotationx":h=d.push("rotateX(",this._string[this._positions[3]],"deg) ");e[3]=h-2;break;case "ry":case "rotatey":case "rotationy":h=
d.push("rotateY(",this._string[this._positions[4]],"deg) ");e[4]=h-2;break;case "rz":case "rotatez":case "rotationz":h=d.push("rotateZ(",this._string[this._positions[5]],"deg) ");e[5]=h-2;break;case "s":case "scale":h=d.push("scale3d(",this._string[this._positions[6]],",",this._string[this._positions[7]],",",this._string[this._positions[8]],") "),e[6]=h-6,e[7]=h-4,e[8]=h-2}this._string=d;this._positions=e;this.isAutoUpdate&&this.updateTransform();return this};a.perspective=function(c){switch(arguments.length){case 0:return this._domElement.style[volcano.Core._browserPrefix+
"Perspective"];case 1:return this.isAutoUpdate&&this.updateTransform(),this._domElement.style[volcano.Core._browserPrefix+"Perspective"]=typeof c==="string"?c:c+"px",this}};a.getStyle=function(c){return this._domElement.style[c]};a.setStyle=function(c,a){this._domElement.style[c]=a;arguments.length>2&&(this._domElement.style[volcano.Core._browserPrefix+c]=a);return this};a._styleName="";a.styleName=function(c){return arguments.length?(this._styleName=c,this._domElement.className=c,this):this._styleName!==
""?this._styleName:this._domElement.className};a.html=function(c){return arguments.length?(this.innerHTML=c,this):this.innerHTML};a.updateTransform=function(){var c="";_.all(this._string,function(a){c+=a;return true});this._domElement.style[volcano.Core._transformProperty]=c;return this};a._name="";a.name=function(c){return arguments.length?(this._name=c,this):this._name};a._id="";a.id=function(c){return arguments.length?(this._id=c,this._domElement.id=c,this):this._id};a.alpha=function(c){return arguments.length?
(this._alpha=c,this._domElement.style.opacity=c,this):this._alpha};a._visible=false;a.visible=function(c){if(arguments.length){var a;this._visible=c;c===true?a="visible":a="hidden";this._domElement.style.visibility=a;return this}else return this._visible};f.volcano.VObject=b})(window);(function(f){var b=function(c){this.initialize(c)},a=b.prototype=new volcano.VObject;a._domElement=null;a._elementsContent=null;a.eventCallback=null;a.parent=null;a._alpha=1;a._string=[];a._positions=[];a.isAutoUpdate=true;a._ox=0;a._oy=0;a._oz=0;a.VObject_initialize=a.initialize;a.initialize=function(c){this._domElement={};this._elementsContent=[];this.parent={};this.VObject_initialize(c)};a._checkRangeError=function(c,a){var b=this._elementsContent.length-1;a&&b++;if(c<0||c>b)throw"Elements Range Error";
};a._elementAdded=function(c,a,b){c.parent=this;var d=this._domElement,c=c._domElement,e=0;d.children.length>0&&(e=d.children[0].localName==="canvas"?1:0);d.children.length-e===a?d.appendChild(c):(console.log(this.getElementAt(a)._domElement),d.insertBefore(c,this.getElementAt(a)._domElement));b&&this.dispatchEvent("elementAdded")};a._elementRemoved=function(c,a,b){c.parent=null;this._domElement.removeChild(c._domElement);b&&this.dispatchEvent("elementRemoved")};a.getNumElements=function(){return this._elementsContent.length};
a.getElementAt=function(c){this._checkRangeError(c,false);return this._elementsContent[c]};a.addElement=function(c){var a=this.getNumElements();c.parent===this&&(a=this.getNumElements()-1);return this.addElementAt(c,a)};a.addElementAt=function(a,i){if(a===this)throw"Cannot add yourself as your Child";this._checkRangeError(i,true);var g=a.parent;if(g===this)return this.setElementIndex(a,i),a;else g instanceof b&&g.removeElement(a);this._elementsContent.splice(i,0,a);this._elementAdded(a,i);return a};
a.removeElement=function(a){return this.removeElementAt(this.getElementIndex(a))};a.removeElementAt=function(a){this._checkRangeError(a);this._elementRemoved(this._elementsContent[a],a);this._elementsContent.splice(a,1)};a.removeAllElements=function(){for(var a=this.getNumElements()-1;a>=0;a--)this.removeElementAt(a)};a.getElementIndex=function(a){return _.indexOf(this._elementsContent,a)};a.setElementIndex=function(a,b){this._checkRangeError(b);this.getElementIndex(a)!==b&&(this.removeElement(a),
this.addElementAt(a,b))};f.volcano.VSprite=b})(window);(function(f){var b=function(a){this.initialize(a)},a=b.prototype=new volcano.VSprite;a.VSprite_initialize=a.initialize;a.instance=null;a._nestLevel=0;a._body=null;a._onEnterFrameItems=null;a.initialize=function(a){this.instance={};this._body={};this._onEnterFrameItems=[];this.VSprite_initialize("#systemManager");Ticker.setFPS(this._fps);Ticker.addListener(this);this._body=_.isObject(a)?a:document.body;var b=this._body.style;this.setSize(b.width,b.height);this._body.appendChild(this._domElement);this._domElement.style.overflow=
"hidden";this._domElement.style[volcano.Core._browserPrefix+"Perspective"]="800px";this._domElement.style[volcano.Core._browserPrefix+"PerspectiveOrigin"]="0 0";this._domElement.style[volcano.Core._browserPrefix+"TransformOrigin"]="0 0";this._domElement.style[volcano.Core._browserPrefix+"TransformStyle"]="flat";this._nestLevel=1;volcano.LayoutManager.systemManager=this;var g=this.instance=this;f.addEventListener("resize",function(){g.setSize(b.width,b.height);g.dispatchEvent("resize")})};a.setSize=
function(a,b){this.width(_.isNumber(a)?a:f.innerWidth).height(_.isNumber(b)?b:f.innerHeight);return this};a.getNestLevel=function(){return this._nestLevel};a._fps=24;a.setFrameRate=function(a){this._fps=a;Ticker.setFPS(a);return this};a.getFrameRate=function(){return this._fps};a.VSprite__elementAdded=a._elementAdded;a._elementAdded=function(a,b,g){this.VSprite__elementAdded(a,b,g);a.setNestLevel&&a.setNestLevel(this.getNestLevel()+1);a.getInitialized&&a.getInitialized()&&a.initComponent()};a.enterFrameEventMode=
false;a.tick=function(){var a=this._onEnterFrameItems.length;this.enterFrameEventMode&&this.dispatchEvent("enterFrame");for(var b=0;b<a;b++)if(_.isFunction(this._onEnterFrameItems[b]))this._onEnterFrameItems[b]()};a.addEnterFrameListener=function(a,b){if(_.indexOf(this._onEnterFrameItems,a)!==-1)return this;b?b=true:b=false;b?this._onEnterFrameItems.unshift(a):this._onEnterFrameItems.push(a);return this};a.removeEnterFrameListener=function(a){this._onEnterFrameItems.splice(_.indexOf(this._onEnterFrameItems,
a),1);return this};f.volcano.SystemManager=b})(window);(function(f){var b=function(){throw"LayoutManager cannot be initialized.";},a=function(){this._priorityBins=[];var a=0,b=-1;this.addObject=function(d,e){b<a?a=b=e:(e<a&&(a=e),e>b&&(b=e));var h=this._priorityBins[e];h?_.indexOf(h.items,d)!==1&&(h.items.push(d),h.length++):(h=new g,this._priorityBins[e]=h,h.items.push(d),h.length++)};this.removeLargest=function(){var d=null;if(a<=b){for(var e=this._priorityBins[b];!e||e.length===0;){b--;if(b<a)return null;e=this._priorityBins[b]}for(;0<e.items.length;){d=
e.items[0];this.removeChild(e.items[0],b);break}for(;!e||e.length===0;){b--;if(b<a)break;e=this._priorityBins[b]}}return d};this.removeLargestChild=function(a){for(var c=b,g=a.getNestLevel();g<=c;){var j=this._priorityBins[c];if(j&&j.length>0){if(c===a.getNestLevel())for(var f=0;f<j.items.length;f++){if(a===j.items[f])return this.removeChild(j.items[f],c),a}else for(f=0;f<j.items.length;f++)if(j.items[f]instanceof volcano.UIComponent&&a===j.items[f])return this.removeChild(j.items[f],c),j.items[f];
c--}else if(c===b&&b--,c--,c<g)break}return null};this.removeSmallest=function(){var d=null;if(a<=b){for(var e=this._priorityBins[a];!e||e.length===0;){a++;if(a>b)return null;e=this._priorityBins[a]}for(;0<e.items.length;){d=e.items[0];this.removeChild(e.items[0],a);break}for(;!e||e.length===0;){a++;if(a>b)break;e=this._priorityBins[a]}}return d};this.removeSmallestChild=function(d){for(var e=d.getNestLevel();e<=b;){var g=this._priorityBins[e];if(g&&g.length>0){if(e===d.getNestLevel())for(var f=0;f<
g.items.length;f++)d===g.items[f]&&this.removeChild(d,e);else for(var m in g.items)for(f=0;f<g.items.length;f++)if(g.items[f]instanceof volcano.UIComponent&&d===g.items[f])return this.removeChild(g.items[f],e),g.items[f];e++}else if(e===a&&a++,e++,e>b)break}return null};this.removeChild=function(a,b){for(var c=this._priorityBins[b>=0?b:a.getNestLevel()],i=0;i<c.items.length;i++)if(c.items[i]===a)return c.items.splice(i,1),c.length--,a;return null};this.removeAll=function(){a=this._priorityBins.length=
0;b=-1};this.isEmpty=function(){return a>b};var g=function(){this.length=0;this.items=[]}};b.systemManager=null;b._updateCompleteQueue=new a;b._invalidatePropertiesQueue=new a;b._invalidatePropertiesFlag=false;b._invalidateClientPropertiesFlag=false;b._invalidateSizeQueue=new a;b._invalidateSizeFlag=false;b._invalidateClientSizeFlag=false;b._invalidateDisplayListQueue=new a;b._invalidateDisplayListFlag=false;b._waitAFrame=false;b._listenersAttached=false;b._originalFrameRate=NaN;b._targetLevel=Number.MAX_VALUE;
b._currentObject={};b._usePhasedInstantiation=false;b.getUsePhasedInstantiation=function(){return b._usePhasedInstantiation};b.setUsePhasedInstantiation=function(a){if(b._usePhasedInstantiation!==a)b._usePhasedInstantiation=a};b.invalidateProperties=function(a){if(!b._invalidatePropertiesFlag)b._invalidatePropertiesFlag=true,b._listenersAttached||b.attachListeners(b.systemManager);if(b._targetLevel<=a.getNestLevel())b._invalidateClientPropertiesFlag=true;b._invalidatePropertiesQueue.addObject(a,a.getNestLevel())};
b.invalidateSize=function(a){if(!b._invalidateSizeFlag)b._invalidateSizeFlag=true,b._listenersAttached||b.attachListeners(b.systemManager);if(b._targetLevel<=a.getNestLevel())b._invalidateClientSizeFlag=true;b._invalidateSizeQueue.addObject(a,a.getNestLevel())};b.invalidateDisplayList=function(a){if(!b._invalidateDisplayListFlag)b._invalidateDisplayListFlag=true,b._listenersAttached||b.attachListeners(b.systemManager);b._invalidateDisplayListQueue.addObject(a,a.getNestLevel())};b._validateProperties=
function(){for(var a=b._invalidatePropertiesQueue.removeSmallest();a;){if(a.getNestLevel())b._currentObject=a,a.validateProperties(),a.getUpdateCompletePendingFlag()||(b._updateCompleteQueue.addObject(a,a.getNestLevel()),a.setUpdateCompletePendingFlag(true));a=b._invalidatePropertiesQueue.removeSmallest()}if(b._invalidatePropertiesQueue.isEmpty())b._invalidatePropertiesFlag=false};b._validateSize=function(){for(var a=b._invalidateSizeQueue.removeLargest();a;){if(a.getNestLevel())b._currentObject=
a,a.validateSize(),a.getUpdateCompletePendingFlag()||(b._updateCompleteQueue.addObject(a,a.getNestLevel()),a.setUpdateCompletePendingFlag(true));a=b._invalidateSizeQueue.removeLargest()}if(b._invalidateSizeQueue.isEmpty())b._invalidateSizeFlag=false};b._validateDisplayList=function(){for(obj=b._invalidateDisplayListQueue.removeSmallest();obj;){if(obj.getNestLevel())b._currentObject=obj,obj.validateDisplayList(),obj.getUpdateCompletePendingFlag()||(b._updateCompleteQueue.addObject(obj,obj.getNestLevel()),
obj.getUpdateCompletePendingFlag(true));obj=b._invalidateDisplayListQueue.removeSmallest()}if(b._invalidateDisplayListQueue.isEmpty())b._invalidateDisplayListFlag=false};b._doPhasedInstantiation=function(){b.getUsePhasedInstantiation()?b._invalidatePropertiesFlag?b._validateProperties():b._invalidateSizeFlag?b._validateSize():b._invalidateDisplayListFlag&&b._validateDisplayList():(b._invalidatePropertiesFlag&&b._validateProperties(),b._invalidateSizeFlag&&b._validateSize(),b._invalidateDisplayListFlag&&
b._validateDisplayList());if(b._invalidatePropertiesFlag||b._invalidateSizeFlag||b._invalidateDisplayListFlag)b.attachListeners(b.systemManager);else{b.setUsePhasedInstantiation(false);b._listenersAttached=false;for(var a=b._updateCompleteQueue.removeLargest();a;)!a.getInitialized()&&a.getProcessedDescriptors()&&a.setInitialized(true),a.dispatchEvent("updateComplete"),a.setUpdateCompletePendingFlag(false),a=b._updateCompleteQueue.removeLargest()}};b._doPhasedInstantiationCallback=function(){if(!(volcano.UIComponent._callLaterDispatcherCount>
0)){b.systemManager.removeEnterFrameListener(b._doPhasedInstantiationCallback);if(volcano.UIComponent._catchCallLaterExceptions)try{b._doPhasedInstantiation()}catch(a){throw"callLaterError LayoutManager";}else b._doPhasedInstantiation();b._currentObject=null}};b.validateNow=function(){if(!b.getUsePhasedInstantiation())for(var a=0;b._listenersAttached&&a++<100;)b._doPhasedInstantiation()};b.validateClient=function(a,i){var g=b._currentObject,d,e=false,f=b._targetLevel;if(b._targetLevel===Number.MAX_VALUE)b._targetLevel=
a.getNestLevel();for(;!e;){e=true;for(d=b._invalidatePropertiesQueue.removeSmallestChild(a);d;){if(d.getNestLevel())b._currentObject=d,d.validateProperties(),d.getUpdateCompletePendingFlag()||(b._updateCompleteQueue.addObject(d,d.getNestLevel()),d.setUpdateCompletePendingFlag(true));d=b._invalidatePropertiesQueue.removeSmallestChild(a)}if(b._invalidatePropertiesQueue.isEmpty())b._invalidatePropertiesFlag=false,b._invalidateClientPropertiesFlag=false;for(d=b._invalidateSizeQueue.removeLargestChild(a);d;){if(d.getNestLevel())b._currentObject=
d,d.validateSize(),d.getUpdateCompletePendingFlag()||(b._updateCompleteQueue.addObject(d,d.getNestLevel()),d.setUpdateCompletePendingFlag(true));if(b._invalidateClientPropertiesFlag&&(d=b._invalidatePropertiesQueue.removeSmallestChild(a))){b._invalidatePropertiesQueue.addObject(d,d.getNestLevel());e=false;break}d=b._invalidateSizeQueue.removeLargestChild(a)}if(b._invalidateSizeQueue.isEmpty())b._invalidateSizeFlag=false,b._invalidateClientSizeFlag=false;if(!i){for(d=b._invalidateDisplayListQueue.removeSmallestChild(a);d;){if(d.getNestLevel())b._currentObject=
d,d.validateDisplayList(),d.getUpdateCompletePendingFlag()||(b._updateCompleteQueue.addObject(d,d.getNestLevel()),d.setUpdateCompletePendingFlag(true));if(b._invalidateClientPropertiesFlag&&(d=b._invalidatePropertiesQueue.removeSmallestChild(a))){b._invalidatePropertiesQueue.addObject(d,d.getNestLevel());e=false;break}if(b._invalidateClientSizeFlag&&(d=b._invalidateSizeQueue.removeLargestChild(a))){b._invalidateSizeQueue.addObject(d,d.getNestLevel());e=false;break}d=b._invalidateDisplayListQueue.removeSmallestChild(a)}if(b._invalidateDisplayListQueue.isEmpty())b._invalidateDisplayListFlag=
false}}if(f===Number.MAX_VALUE&&(b._targetLevel=Number.MAX_VALUE,!i))for(d=b._updateCompleteQueue.removeLargestChild(a);d;)d.getInitialized()||d.setInitialized(true),d.setUpdateCompletePendingFlag(false),d=b._updateCompleteQueue.removeLargestChild(a);b._currentObject=g};b._waitFrame=function(){b.systemManager.removeEnterFrameListener(b._waitFrame);b.systemManager.addEnterFrameListener(b._doPhasedInstantiationCallback);b._waitAFrame=true};b.attachListeners=function(a){b._waitAFrame?a.addEnterFrameListener(b._doPhasedInstantiationCallback):
a.addEnterFrameListener(b._waitFrame);b._listenersAttached=true};f.volcano.LayoutManager=b})(window);(function(f){var b=function(){this.initialize()},a=b.prototype=new volcano.VSprite,c=function(a,b){this.method=a;this.args=b};b._callLaterDispatcherCount=0;b._catchCallLaterExceptions=false;a._methodQueue=null;a.systemManager=null;a._skin=null;a.states=null;a._deferredSetStyles=null;a._owner=null;a._domElement=null;a._skinCanvas=null;a._updateCompletePendingFlag=false;a._processedDescriptiors=false;a.VSprite_initialize=a.initialize;a.initialize=function(){this._methodQueue=[];this.systemManager=volcano.LayoutManager.systemManager;
this._skin={};this.states=[];this._deferredSetStyles={};this._owner={};this._domElement={};this._skinCanvas={};this.VSprite_initialize();var a=document.documentMode,a=/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())&&(!a||a<=7),b=this._width,c=this._height,e=document.createElement("canvas");e.width=b;e.height=c;try{a&&(e=f.G_vmlCanvasManager.initElement(e))}catch(h){}this._skinCanvas=e;this._domElement.appendChild(this._skinCanvas)};a.getOwner=function(){return this._owner?this._owner:this.parent};
a.setOwner=function(a){this._owner=a;return this};a._nestLevel=0;a.getNestLevel=function(){return this._nestLevel};a.setNestLevel=function(a){if(a!==1){a>1&&this._nestLevel!==a?(this._nestLevel=a,this._updateCallbacks(),a++):a===0?this._nestLevel=a=0:a++;for(var b=this.getNumElements(),c=0;c<b;c++){var e=this.getElementAt(c);e&&e.setNestLevel(a)}}};a.setProcessedDescriptors=function(a){this._processedDescriptors=a};a.getProcessedDescriptors=function(){return this._processedDescriptors};a._updateCallbacks=
function(){this._invalidateDisplayListFlag&&volcano.LayoutManager.invalidateDisplayList(this);this._invalidateSizeFlag&&volcano.LayoutManager.invalidateSize(this);this._invalidatePropertiesFlag&&volcano.LayoutManager.invalidateProperties(this);if(this.systemManager&&this._methodQueue.length>0&&!this._listeningForRender)this.systemManager.addEnterFrameListener(this._callLaterDispatcher),this._listeningForRender=true};a.validateNow=function(){volcano.LayoutManager.validateClient(this)};a.getStyle=function(a){var b=
null;_.isString(a)&&(b=this._deferredSetStyles[a]);return b};a.setStyle=function(a,b){var c=false;_.isString(a)&&(this._deferredSetStyles[a]=b,c=true);c&&(this.invalidateProperties(),this.invalidateDisplayList());return this};a._styleName=null;a.getStyleName=function(){return this._styleName};a.setStyleName=function(a){if(this._styleName!==a)this._styleName=a;return this};a.getSkin=function(){return this._skin};a.setSkin=function(a){var b=false;if(this._skin!==a)this._skin=a,b=true;b&&(this.invalidateProperties(),
this.invalidateDisplayList())};a._measuredWidth=0;a.getMeasuredWidth=function(){return this._measuredWidth};a.setMeasuredWidth=function(a){this._measuredWidth=a;return this};a._measuredHeight=0;a.getMeasuredHeight=function(){return this._measuredHeight};a.setMeasuredHeight=function(a){this._measuredHeight=a;return this};a.setWidth=function(a){this._width=a;this._domElement.width=a+"px";this.invalidateProperties();this.invalidateDisplayList();return this};a.setPercentWidth=function(a){this._percentWidth=
a;this._domElement.width=a+"%";this.invalidateProperties();this.invalidateDisplayList();return this};a.setHeight=function(a){this._height=a;this._domElement.height=a+"px";this.invalidateProperties();this.invalidateDisplayList();return this};a.setPercentHeight=function(a){this._percentHeight=a;this._domElement.height=a+"%";this.invalidateProperties();this.invalidateDisplayList();return this};a._enabled=false;a.getEnabled=function(){return this._enabled};a.setEnabled=function(a){this._enabled=a;this.invalidateDisplayList()};
a.setActualSize=function(a,b){var c=false;if(this._width!=a)this._domElement.width=a+"px",this._skinCanvas.width=a+"px",c=true;if(this._height!=b)this._domElement.width=b+"px",this._skinCanvas.width=b+"px",c=true;c&&(this.invalidateProperties(),this.invalidateDisplayList())};a.move=function(a,b){var c=this._domElement.style;if(this._x!=a)c.left=this._x+"px";if(this._y!=b)c.top=this._y+"px"};a._invalidatePropertiesFlag=false;a._invalidateSizeFlag=false;a._invalidateDisplayListFlag=false;a.invalidateProperties=
function(){if(!this._invalidatePropertiesFlag)this._invalidatePropertiesFlag=true,volcano.LayoutManager.invalidateProperties(this)};a.invalidateSize=function(){if(!this._invalidateSizeFlag)this._invalidateSizeFlag=true,volcano.LayoutManager.invalidateSize(this)};a.invalidateDisplayList=function(){if(!this._invalidateDisplayListFlag)this._invalidateDisplayListFlag=true,volcano.LayoutManager.invalidateDisplayList(this)};a.validateProperties=function(){if(this._invalidatePropertiesFlag)this.commitProperties(),
this._invalidatePropertiesFlag=false};a.validateSize=function(a){if(a===true)for(a=0;a<this.getNumElements;a++)this.getElementAt(a).validateSize(true);this._invalidateSizeFlag&&this.measure()};a.validateDisplayList=function(){if(this._invalidateDisplayListFlag)this.updateDisplayList(this.getMeasuredWidth(),this.getMeasuredHeight()),this._invalidateDisplayListFlag=false};a._listeningForRender=false;a._callLaterDispatcher=function(){b._callLaterDispatcherCount++;if(this._listeningForRender)this.systemManager.removeEnterFrameListener(this._callLaterDispatcher),
this._listeningForRender=false;var a=this._methodQueue;this._methodQueue=[];var c=a.length;if(c>0)for(var d=0;d<c;d++){var e=a[d];e.method.apply(null,e.args)}b._callLaterDispatcherCount--};a.callLater=function(a,b){this._methodQueue.push(new c(a,b));if(!this._listeningForRender)this.systemManager.addEnterFrameListener(this._callLaterDispatcher),this._listeningForRender=true};a.VSprite__elementAdded=a._elementAdded;a._elementAdded=function(a,b,c){this.VSprite__elementAdded(a,b,c);a.parentChanged(this);
a.setNestLevel(this.getNestLevel()+1);a.getInitialized()||a.initComponent()};a.VSprite__elementRemoved=a._elementRemoved;a._elementRemoved=function(a,b,c){a.parentChanged(null);this.VSprite__elementRemoved(a,b,c)};a.getUpdateCompletePendingFlag=function(){return this._updateCompletePendingFlag};a.setUpdateCompletePendingFlag=function(a){this._updateCompletePendingFlag=a};a.parentChanged=function(a){a?this.parent=a.name==="systemManager"?a:a._skinCanvas&&a._skinCanvas.localName==="canvas"?a:a.parent:
(this.parent=null,this.setNestLevel(0))};a._initialized=false;a.getInitialized=function(){return this._initialized};a.setInitialized=function(a){(this._initialized=a)&&this.dispatchEvent("creationComplete")};a.initComponent=function(){this.getInitialized()||(this.dispatchEvent("preinitialize"),this.createChildren(),this.childrenCreated(),this.initializationComplete())};a.getLayoutBoundsX=function(){};a.getLayoutBoundsY=function(){};a.createChildren=function(){};a.childrenCreated=function(){this.invalidateProperties();
this.invalidateSize();this.invalidateDisplayList()};a.commitProperties=function(){console.log(this.getName()+"   -------------   commitProperties")};a.measure=function(){console.log(this.getName()+"   -------------   measure")};a.updateDisplayList=function(){console.log(this.getName()+"   -------------   updateDisplayList")};a.initializationComplete=function(){this.dispatchEvent("initialize");this.setProcessedDescriptors(true)};f.volcano.UIComponent=b})(window);(function(f){var b=function(){this.initialize()},a=b.prototype=new volcano.UIComponent;a.UIComponent_initialize=a.initialize;a.initialize=function(){this.UIComponent_initialize()};a.createChildren=function(){this._validateSkinChange()};a._skinStateIsDirty=false;a.invalidateSkinState=function(){if(!this._skinStateIsDirty)this._skinStateIsDirty=true,this.invalidateProperties()};a.getSkinParts=function(){return null};a.attachSkin=function(){if(!this._skin){var a=this.getStyle("skinClass");a&&this.setSkin(new this[a]);
this._skin&&(this._skin.setOwner(this),this._skin.setStyleName(this),this.addElement(this._skin));this.findSkinParts();this.invalidateSkinState()}};a.clearSkinParts=function(){var a=this.getSkinParts();if(a)for(var b in a)this[b]!==null&&this.partRemoved(b,this[b])};a.detachSkin=function(){this._skin.setStyleName(null);this.clearSkinParts();this.removeElement(this._skin);this.setSkin(null)};a.findSkinParts=function(){var a=this.getSkinParts();if(a)for(var b in a){if(a[b]==true&&!(b in this._skin))throw"Required Skin Part Not Found";
b in this._skin&&(this[b]=this._skin[b],this[b]!==null&&this.partAdded(b,this[b]))}};a.getCurrentSkinState=function(){return null};a.partAdded=function(){};a.partRemoved=function(){};a._validateSkinChange=function(){this._skin&&this.detachSkin();this.attachSkin()};f.volcano.SkinnableComponent=b})(window);(function(){var f=function(){this.initialize()},b=f.prototype=new volcano.UIComponent;b._applicationDPI=160;b.measuredDefaultHeight=0;b.measuredDefaultWidth=0;b.UIComponent_initialize=b.initialize;b.initialize=function(){this.UIComponent_initialize()};b._currentState="";b.getCurrentState=function(){return this._currentState};b.setCurrentState=function(a){if(a!==this._currentState)this._currentState=a,this.commitCurrentState()};b.beginHighlightBitmapCapture=function(){};b.endHighlightBitmapCapture=
function(){};b.hasState=function(){return true};b.applyColorTransform=function(){};b.getElementPreferredHeight=function(a){return a instanceof volcano.LayoutBase?a.getPreffrredBoundsWidth():a instanceof volcano.UIComponent?a.getMeasuredWidth():a.getWidth()};b.getElementPreferredWidth=function(a){return a instanceof volcano.LayoutBase?a.getPreffrredBoundsHeight():a instanceof volcano.UIComponent?a.getMeasuredHeight():a.getHeight()};b.setElementPosition=function(a,b,f){a instanceof volcano.LayoutBase?
a.setLayoutBoundPosition(b,f,false):a instanceof volcano.UIComponent?a.move(b,f):(a.setX(b),a.setY(f))};b.setElementSize=function(a,b,f){a instanceof volcano.LayoutBase?a.setLayoutBoundSize(b,f,false):a instanceof volcano.UIComponent?a.setActualSize(b,f):(a.setWidth(b),a.setHeight(f))};b.UIComponent_getMeasuredWidth=b.getMeasuredWidth;b.UIComponent_getMeasuredHeight=b.getMeasuredHeight;b.getMeasuredWidth=function(){return Math.max(this.UIComponent_getMeasuredWidth(),this.measuredDefaultWidth)};b.getMeasuredHeight=
function(){return Math.max(this.UIComponent_getMeasuredHeight(),this.measuredDefaultHeight)};b.useSymbolColor=false;b.UIComponent_updateDisplayList=b.updateDisplayList;b.updateDisplayList=function(a,b){this.UIComponent_updateDisplayList(a,b);this.layoutContents(a,b);this.useSymbolColor&&this.applySymbolColor();useMinimumHitArea&&this.drawMinimumHitArea(a,b);this.drawBackground(a,b)};b.commitCurrentState=function(){};b.layoutContents=function(){};b.drawBackground=function(){};this.window.volcano.SkinBase=
f})(window);(function(f){var b=function(){throw"ColorUtil cannot be initialized.";};b.getRandomColor=function(){for(var a="0123456789ABCDEF".split(""),b="#",f=0;f<6;f++)b+=a[Math.round(Math.random()*15)];return b};f.volcano.ColorUtil=b})(window);(function(f){var b=function(){throw"ObjectUtil cannot be initialized.";};b._inProgress=[];b.toString=function(a,c,f,g,d){g==void 0&&(g=100);d==void 0&&(d=0);for(var e=0;e<b._inProgress.length;e++)if(b._inProgress[e]==a)return"***";b._inProgress.push(a);d++;e=typeof a;if(a instanceof Date)e=a.toString();else if(e=="object"){var h=[];if(a instanceof Array)for(var e="[",j=0;j<a.length;j++)h.push(j);else{e="{";for(j in a)h.push(j);h.sort()}for(var j="",m=0;m<h.length;m++){var k=a[h[m]],l=true;typeof k==
"function"&&(l=c==true);typeof k=="undefined"&&(l=f==true);l&&(e+=j,a instanceof Array||(e+=h[m]+": "),e+=b.toString(k,c,f,g,d),j=", `")}e+=a instanceof Array?"]":"}"}else e=e=="function"?"function":e=="string"?'"'+a+'"':String(a);e=="undefined"&&(e="-");b._inProgress.pop();return b.replaceAll(e,"`",e.length<g?"":"\n"+b.doIndent(d))};b.replaceAll=function(a,b,f){for(var a=a.split(b),g=b="",d=0;d<a.length;d++)b+=g+a[d],g=f;return b};b.doIndent=function(a){for(var b="",f=0;f<a;f++)b+="     ";return b};
f.volcano.ObjectUtil=b})(window);
